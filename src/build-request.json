{
  "kind": "build_request",
  "title": "Enforce valid custom-domain slug rules and guide invalid domain inputs",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a repository-level validation step that checks the deployment slug in `frontend/deploy/custom-domain.json` meets the documented domain rules (5–50 chars; only letters, numbers, and hyphens; no spaces/dots/special characters) and fails the build/deploy workflow with a clear English error message when invalid.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-1"
        ],
        "quotes": [
          "User: \"Ai master\""
        ]
      },
      "acceptanceCriteria": [
        "If `frontend/deploy/custom-domain.json` contains a slug with spaces (e.g., \"ai master\"), the validation fails and reports an English error explaining allowed characters and length constraints.",
        "If `frontend/deploy/custom-domain.json` contains a valid slug (e.g., \"ai-master\"), validation passes with no warnings.",
        "The error message explicitly mentions: 5–50 characters; allowed: letters/numbers/hyphens; disallowed: spaces/dots/special characters."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Improve domain setup guidance in `frontend/README.md` by adding a short, explicit troubleshooting section explaining that using a domain with spaces (e.g., \"Ai master\") may result in a deployment that succeeds but an app that cannot be opened, and instruct users to use a DNS-safe slug such as \"ai-master\".",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-1"
        ],
        "quotes": [
          "User: \"Ai master\""
        ]
      },
      "acceptanceCriteria": [
        "README includes a troubleshooting section that explicitly calls out spaces as invalid and provides an example mapping like \"Ai master\" -> \"ai-master\".",
        "All added documentation text is in English.",
        "README continues to reference `frontend/deploy/custom-domain.json` as the source of truth for the slug."
      ]
    }
  ],
  "constraints": [
    "Use English for any user-facing text.",
    "Do not edit any files under `frontend/src/components/ui` or other paths listed as immutable in SYSTEM_CONTEXT.",
    "Backend must remain a single Motoko actor in `backend/main.mo`; do not introduce additional backend services."
  ],
  "nonGoals": [
    "Implementing a runtime in-app custom domain editor UI.",
    "Adding third-party domain providers, DNS automation, or external validation services.",
    "Changing the current valid slug value (\"ai-master\") unless the user explicitly requests a different valid slug."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}